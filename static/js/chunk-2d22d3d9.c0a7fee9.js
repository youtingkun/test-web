(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22d3d9"],{f73e:function(t,i,e){"use strict";e.r(i);var r=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"app-container"},[e("h2",[t._v(" 提额开关 "),e("el-switch",{directives:[{name:"has",rawName:"v-has",value:t.$auth.ADD_CREDIT_EDIT,expression:"$auth.ADD_CREDIT_EDIT"}],attrs:{"active-color":"#409EFF","inactive-color":"#ccc","active-text":"开","inactive-text":"关","active-value":1,"inactive-value":0},on:{change:t.changeStatus},model:{value:t.switchStatus,callback:function(i){t.switchStatus=i},expression:"switchStatus"}})],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.tableList,border:"","header-row-class-name":"table-header"}},[e("el-table-column",{attrs:{label:t.$t("system_stage"),prop:"creditLevelName"}}),e("el-table-column",{attrs:{label:t.$t("fraction"),prop:"range"}}),e("el-table-column",{attrs:{label:t.$t("quota"),prop:"creditAmount"}}),e("el-table-column",{attrs:{label:t.$t("common_operate_time"),prop:"updateTime"}}),e("el-table-column",{attrs:{label:t.$t("common_operation"),align:"center",width:"100 ",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(i){var r=i.row;return[e("el-button",{directives:[{name:"has",rawName:"v-has",value:t.$auth.ADD_CREDIT_EDIT,expression:"$auth.ADD_CREDIT_EDIT"}],attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.handleEdit(r)}}},[t._v(" "+t._s(t.$t("common_edit"))+" ")])]}}])})],1),e("el-dialog",{attrs:{title:t.$t("credit_line"),visible:t.editVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(i){t.editVisible=i},close:t.handleClose}},[e("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-suffix":"：","label-width":"auto"}},[e("el-form-item",{attrs:{label:t.$t("quota"),prop:"creditAmount"}},[e("el-input",{model:{value:t.ruleForm.creditAmount,callback:function(i){t.$set(t.ruleForm,"creditAmount",t._n(i))},expression:"ruleForm.creditAmount"}})],1)],1),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(i){t.editVisible=!1}}},[t._v(t._s(t.$t("common_cancel")))]),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogBtnLoading,expression:"dialogBtnLoading"}],attrs:{type:"primary"},on:{click:function(i){return t.handleSure()}}},[t._v(t._s(t.$t("common_confirm")))])],1)],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.limitLoading,expression:"limitLoading"}],staticStyle:{"margin-top":"30px"},attrs:{data:t.limitList,border:"","header-row-class-name":"table-header"}},[e("el-table-column",{attrs:{label:t.$t("credit_line_range"),prop:"range"}}),e("el-table-column",{attrs:{label:t.$t("fraction"),prop:"score"}}),e("el-table-column",{attrs:{label:t.$t("common_operation"),align:"center",width:"100 ",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(i){var r=i.row;return[e("el-button",{directives:[{name:"has",rawName:"v-has",value:t.$auth.ADD_CREDIT_EDIT,expression:"$auth.ADD_CREDIT_EDIT"}],attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.limitEdit(r)}}},[t._v(" "+t._s(t.$t("common_edit"))+" ")])]}}])})],1),e("el-dialog",{attrs:{title:t.$t("credit_line"),visible:t.limitVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(i){t.limitVisible=i}}},[e("el-form",{ref:"limitForm",attrs:{model:t.limitForm,rules:t.limitRules,"label-suffix":"：",inline:!0}},[2==t.limitForm.creditLimitType?e("el-form-item",{attrs:{label:"授信额度相差区间"}},[e("el-form-item",{attrs:{prop:"creditLimitMin"}},[e("el-input",{staticStyle:{width:"150px"},model:{value:t.limitForm.creditLimitMin,callback:function(i){t.$set(t.limitForm,"creditLimitMin",t._n(i))},expression:"limitForm.creditLimitMin"}})],1),t._v("- "),e("el-form-item",{attrs:{prop:"creditLimitMax"}},[e("el-input",{staticStyle:{width:"150px"},model:{value:t.limitForm.creditLimitMax,callback:function(i){t.$set(t.limitForm,"creditLimitMax",t._n(i))},expression:"limitForm.creditLimitMax"}})],1)],1):t._e(),1==t.limitForm.creditLimitType?e("el-form-item",{attrs:{label:"授信额度相差区间",prop:"creditLimitMin"}},[e("el-input",{staticStyle:{width:"150px"},model:{value:t.limitForm.creditLimitMin,callback:function(i){t.$set(t.limitForm,"creditLimitMin",t._n(i))},expression:"limitForm.creditLimitMin"}}),t._v(" 以上 ")],1):t._e()],1),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(i){t.limitVisible=!1}}},[t._v(t._s(t.$t("common_cancel")))]),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogBtnLoading,expression:"dialogBtnLoading"}],attrs:{type:"primary"},on:{click:function(i){return t.handleSureLimit()}}},[t._v(t._s(t.$t("common_confirm")))])],1)],1)],1)},a=[],l=(e("4de4"),e("d81d"),e("5530")),n=e("8593"),o={name:"paymentauto",data:function(){return{editVisible:!1,switchId:"",switchStatus:"",ruleForm:{id:"",creditLevel:"",creditAmount:""},tableList:[],listLoading:!1,rules:{creditAmount:[{required:!0,type:"number",message:this.$t("common_required"),trigger:"blur"}]},dialogBtnLoading:!1,editType:"",limitList:[],limitLoading:!1,limitVisible:!1,limitForm:{id:"",creditLimitMin:"",creditLimitMax:"",creditLimitType:""},limitRules:{creditLimitMin:[{required:!0,type:"number",message:this.$t("common_required"),trigger:"blur"}],creditLimitMax:[{required:!0,type:"number",message:this.$t("common_required"),trigger:"blur"}]}}},created:function(){this.getData(),this.getLimit()},methods:{getData:function(){var t=this;Object(n["f"])().then((function(i){t.switchId=i.data[0].id,t.switchStatus=i.data[0].status;var e=i.data.filter((function(t){return t.creditLevel>0}));t.tableList=e.map((function(t){return 1==t.creditLevel?t.range="X<="+t.numMax:9==t.creditLevel?t.range="X>"+t.numMin:t.range=t.numMin+"<X≦"+t.numMax,t}))}))},handleClose:function(){this.$refs.ruleForm.clearValidate(),this.editVisible=!1},handleEdit:function(t){this.ruleForm.id=t.id,this.ruleForm.creditLevel=t.creditLevel,this.ruleForm.creditAmount=t.creditAmount,this.editVisible=!0},setData:function(t){var i=this;Object(n["r"])(t).then((function(t){i.getData(),i.$message({message:t.message,type:"success"}),i.editVisible=!1}))},handleSure:function(){var t=this;this.$refs.ruleForm.validate((function(i){if(!i)return console.log("error submit!!"),!1;t.setData({param:Object(l["a"])({},t.ruleForm)})}))},changeStatus:function(){this.setData({param:{id:this.switchId,creditLevel:0,status:this.switchStatus}})},getLimit:function(){var t=this;Object(n["g"])().then((function(i){t.limitList=i.data.map((function(t){return 1==t.creditLimitType?t.range="上一次借款额度与上一次授信额度相差"+t.creditLimitMin+"以上":t.range="上一次实际借款额度与上一次授信额度相差["+t.creditLimitMin+","+t.creditLimitMax+"]",t}))}))},limitEdit:function(t){this.limitForm.id=t.id,this.limitForm.creditLimitMin=t.creditLimitMin,this.limitForm.creditLimitMax=2==t.creditLimitType?t.creditLimitMax:"",this.limitForm.creditLimitType=t.creditLimitType,this.limitVisible=!0},handleSureLimit:function(){var t=this;this.$refs.limitForm.validate((function(i){if(!i)return console.log("error submit!!"),!1;Object(n["s"])({param:Object(l["a"])({},t.limitForm)}).then((function(i){t.getLimit(),t.$message({message:i.message,type:"success"}),t.limitVisible=!1}))}))}}},s=o,m=e("2877"),c=Object(m["a"])(s,r,a,!1,null,null,null);i["default"]=c.exports}}]);