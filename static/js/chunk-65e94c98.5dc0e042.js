(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65e94c98"],{2409:function(e,t,r){"use strict";r.d(t,"B",(function(){return a})),r.d(t,"y",(function(){return o})),r.d(t,"A",(function(){return u})),r.d(t,"z",(function(){return i})),r.d(t,"a",(function(){return s})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return c})),r.d(t,"b",(function(){return d})),r.d(t,"k",(function(){return m})),r.d(t,"h",(function(){return f})),r.d(t,"i",(function(){return b})),r.d(t,"g",(function(){return p})),r.d(t,"l",(function(){return h})),r.d(t,"m",(function(){return _})),r.d(t,"p",(function(){return v})),r.d(t,"q",(function(){return g})),r.d(t,"P",(function(){return y})),r.d(t,"j",(function(){return O})),r.d(t,"Q",(function(){return k})),r.d(t,"M",(function(){return w})),r.d(t,"O",(function(){return $})),r.d(t,"N",(function(){return j})),r.d(t,"C",(function(){return F})),r.d(t,"x",(function(){return x})),r.d(t,"o",(function(){return R})),r.d(t,"D",(function(){return T})),r.d(t,"w",(function(){return N})),r.d(t,"L",(function(){return E})),r.d(t,"n",(function(){return S})),r.d(t,"t",(function(){return A})),r.d(t,"s",(function(){return D})),r.d(t,"K",(function(){return P})),r.d(t,"G",(function(){return q})),r.d(t,"u",(function(){return L})),r.d(t,"e",(function(){return C})),r.d(t,"E",(function(){return U})),r.d(t,"F",(function(){return B})),r.d(t,"r",(function(){return z})),r.d(t,"H",(function(){return V})),r.d(t,"f",(function(){return M})),r.d(t,"J",(function(){return I})),r.d(t,"I",(function(){return G})),r.d(t,"v",(function(){return H}));var n=r("0c6d"),a=function(e){return Object(n["a"])({url:"/boss/loan/manual/statistics",method:"post",data:e})},o=function(e){return Object(n["a"])({url:"/boss/loan/manual/page",method:"post",data:e})},u=function(e){return Object(n["a"])({url:"/boss/loan/manual/refuse",method:"post",data:e})},i=function(e){return Object(n["a"])({url:"/boss/loan/manual/pay",method:"post",data:e})},s=function(e){return Object(n["a"])({url:"/boss/loan/abnormal/page",method:"post",data:e})},l=function(e){return Object(n["a"])({url:"/boss/loan/abnormal/refuse",method:"post",data:e})},c=function(e){return Object(n["a"])({url:"/boss/loan/abnormal/update",method:"post",data:e})},d=function(e){return Object(n["a"])({url:"/boss/loan/abnormal/pay",method:"post",data:e})},m=function(e,t){var r=1==e?"/boss/bankFlow/page":"/boss/bankFlow/accesspage";return Object(n["a"])({url:r,method:"post",data:t})},f=function(e,t){var r=1==e?"/boss/bankFlow/deletion":"/boss/bankFlow/accessdeletion";return Object(n["a"])({url:r,method:"post",data:t})},b=function(e,t){var r=1==e?"/boss/bankFlow/exceptionHandler":"/boss/bankFlow/accessexceptionHandler";return Object(n["a"])({url:r,method:"post",data:t})},p=function(e,t){var r=1==e?"/boss/bankFlow/cancel":"/boss/bankFlow/accesscancel";return Object(n["a"])({url:r,method:"post",data:t})},h=function(e,t){var r=1==e?"/boss/bankFlow/record":"/boss/bankFlow/accessrecord";return Object(n["a"])({url:r,method:"post",data:t})},_=function(e,t){var r=1==e?"/boss/bankFlow/revoke":"/boss/bankFlow/accessrevoke";return Object(n["a"])({url:r,method:"post",data:t})},v=function(e){return Object(n["a"])({url:"/boss/bankFlow/claimFlow",method:"post",data:e})},g=function(e){return Object(n["a"])({url:"/boss/bankFlow/claimFlowList",method:"post",data:e})},y=function(e){return Object(n["a"])({url:"/boss/writeOff/offline/page",method:"post",data:e})},O=function(e){return Object(n["a"])({url:"/boss/bankFlow/getByFlowNo",method:"post",data:e})},k=function(e){return Object(n["a"])({url:"/boss/writeOff/offline/repay",method:"post",data:e})},w=function(e){return Object(n["a"])({url:"/boss/writeOff/abnormal/page",method:"post",data:e})},$=function(e){return Object(n["a"])({url:"/boss/writeOff/abnormal/repay",method:"post",data:e})},j=function(e){return Object(n["a"])({url:"/boss/writeOff/abnormal/refund",method:"post",data:e})};function F(e){return Object(n["a"])({url:"/boss/orderRepay/payAccountChecking/export",method:"post",responseType:"blob",data:e})}function x(e){return Object(n["a"])({url:"/boss/orderRepay/incomeAccountChecking/export",method:"post",responseType:"blob",data:e})}function R(e){return Object(n["a"])({url:"/boss/orderRepay/bindCardChecking/export",method:"post",responseType:"blob",data:e})}function T(e){return Object(n["a"])({url:"/boss/orderRepay/paymentChannel",method:"post",data:e})}function N(){return Object(n["a"])({url:"/boss/tenant/config/payment/auto/getPaymentAuto",method:"post",data:{param:{}}})}function E(e){return Object(n["a"])({url:"/boss/tenant/config/payment/auto/startPaymentAuto",method:"post",data:e})}function S(e){return Object(n["a"])({url:"/boss/tenant/config/payment/auto/bankNameList",method:"get",params:e})}var A=function(e){return Object(n["a"])({url:"/boss/bankFlow/exportExcel",responseType:"blob",method:"post",data:e})},D=function(e){return Object(n["a"])({url:"/boss/bankFlow/exportAccessExcel",responseType:"blob",method:"post",data:e})};function P(e){return Object(n["a"])({url:"/boss/bankFlow/examineFlow",method:"post",data:e})}function q(e){return Object(n["a"])({url:"/boss/orderRefund/queryRefundRecord",method:"post",data:e})}function L(e){return Object(n["a"])({url:"/boss/orderRefund/exportRefundRecord",method:"post",responseType:"blob",data:e})}function C(e){return Object(n["a"])({url:"/boss/orderRefund/launchRefund",method:"post",data:e})}function U(e){return Object(n["a"])({url:"/boss/orderRefund/launchRefund",method:"post",data:e})}function B(e){return Object(n["a"])({url:"/boss/orderRefund/queryRefundRecordException",method:"post",data:e})}function z(e){return Object(n["a"])({url:"/boss/orderRefund/saveRefund",method:"post",data:e})}function V(e){return Object(n["a"])({url:"/boss/orderRefund/refuseRefund",method:"post",data:e})}function M(e){return Object(n["a"])({url:"/boss/orderRefund/againRefund",method:"post",data:e})}function I(e){return Object(n["a"])({url:"/boss/writeOff/abnormal/selRepealList",method:"post",data:e})}function G(e){return Object(n["a"])({url:"/boss/writeOff/abnormal/repealExceptionRepay",method:"post",data:e})}function H(e){return Object(n["a"])({url:"/boss/writeOff/abnormal/finishOrderRepay",method:"post",data:e})}},"27d3":function(e,t,r){"use strict";var n=r("c0b7");t["a"]={data:function(){return{isUserNewStatus:{1:this.$t("order_new_user"),2:this.$t("order_old_user")},approveDispatchStatus:{1:this.$t("order_already_distribution"),0:this.$t("order_not_distribution")},orderStatus:{10:this.$t("order_jishenzhong"),11:this.$t("order_machine_review_passed"),14:this.$t("order_machine_review_rejected"),15:this.$t("order_15"),21:this.$t("order_pending_manual_review"),24:this.$t("order_pass"),27:this.$t("order_refuse"),28:this.$t("order_refuse30"),31:this.$t("order_pending_card"),34:this.$t("order_invalid_order"),41:this.$t("order_pending"),50:this.$t("order_three_party_order_successfully_created"),53:this.$t("order_abnormal_loan"),56:this.$t("order_loan_failed"),59:this.$t("order_loan_rejection"),62:this.$t("order_successful_loan"),80:this.$t("order_repaid"),88:this.$t("extension_Cleared")},productSetStatus:{1:this.$t("operation_online"),2:this.$t("operation_offline")},payStyle:{11:this.$t("detail_pay_online"),12:this.$t("detail_pay_withholding"),21:this.$t("detail_pay_offline"),0:this.$t("router_abnormalWriteoff")},spotCheckStatus:{0:"未抽查",1:"已抽查"},refundOrderStatus:{2:"退款中",1:"退款成功"}}},computed:{refundOrderOptions:function(){return Object(n["d"])(this.refundOrderStatus)},spotCheckOptions:function(){return Object(n["d"])(this.spotCheckStatus)},isUserNewOptions:function(){return Object(n["c"])(this.isUserNewStatus)},approveDispatchOptions:function(){return Object(n["c"])(this.approveDispatchStatus)},productSetOptions:function(){return Object(n["c"])(this.productSetStatus)},orderOptions:function(){return Object(n["c"])(this.orderStatus)}}}},"4d62":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{ref:"query",staticClass:"mb10",attrs:{inline:!0,model:e.query,"label-suffix":"："}},[r("el-form-item",{attrs:{label:e.$t("order_order_id")}},[r("el-input",{attrs:{clearable:""},model:{value:e.query.orderNo,callback:function(t){e.$set(e.query,"orderNo",t)},expression:"query.orderNo"}})],1),r("el-form-item",{attrs:{label:e.$t("user_guke_name")}},[r("el-input",{attrs:{clearable:""},model:{value:e.query.username,callback:function(t){e.$set(e.query,"username",t)},expression:"query.username"}})],1),r("el-form-item",{attrs:{label:e.$t("order_phone_number")}},[r("el-input",{attrs:{clearable:""},model:{value:e.query.userPhone,callback:function(t){e.$set(e.query,"userPhone",t)},expression:"query.userPhone"}})],1),r("el-form-item",{attrs:{label:e.$t("common_operator")}},[r("el-input",{attrs:{clearable:""},model:{value:e.query.operatorName,callback:function(t){e.$set(e.query,"operatorName",t)},expression:"query.operatorName"}})],1),r("el-form-item",{attrs:{label:e.$t("common_status")}},[r("el-select",{attrs:{placeholder:"全部",clearable:""},model:{value:e.query.status,callback:function(t){e.$set(e.query,"status",t)},expression:"query.status"}},e._l(e.refundOrderOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:e.$t("order_refund_time")}},[r("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"","end-placeholder":"","value-format":"yyyy-MM-dd"},model:{value:e.refundTime,callback:function(t){e.refundTime=t},expression:"refundTime"}})],1),r("el-form-item",{attrs:{label:"订单结清时间"}},[r("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"","end-placeholder":"","value-format":"yyyy-MM-dd"},model:{value:e.orderFinishTime,callback:function(t){e.orderFinishTime=t},expression:"orderFinishTime"}})],1),r("icon-button",{directives:[{name:"has",rawName:"v-has",value:e.$auth.REFUND_PAGE,expression:"$auth.REFUND_PAGE"}],attrs:{type:"search"},on:{click:e.search}},[e._v(" "+e._s(e.$t("common_search"))+" ")]),r("icon-button",{directives:[{name:"has",rawName:"v-has",value:e.$auth.REFUND_EXPORT,expression:"$auth.REFUND_EXPORT"}],attrs:{type:"download"},on:{click:e.handleExport}},[e._v(e._s(e.$t("report_download"))+" ")])],1),r("div",{staticClass:"mb20"},[r("icon-button",{directives:[{name:"has",rawName:"v-has",value:e.$auth.TO_REFUND,expression:"$auth.TO_REFUND"}],on:{click:e.handleRefund}},[e._v(" "+e._s(e.$t("payment_refund"))+" ")])],1),r("el-table",{attrs:{data:e.tableData,border:"","header-row-class-name":"table-header"}},[r("el-table-column",{attrs:{prop:"appName",label:e.$t("common_app_name")}}),r("el-table-column",{attrs:{prop:"orderNo",label:e.$t("order_order_id")}}),r("el-table-column",{attrs:{prop:"username",label:e.$t("user_guke_name")}}),r("el-table-column",{attrs:{prop:"userPhone",label:e.$t("order_phone_number")}}),r("el-table-column",{attrs:{prop:"mustRefundAmount",label:e.$t("total_due_amount")}}),r("el-table-column",{attrs:{prop:"refundAmount",label:e.$t("order_did_return_amount")}}),r("el-table-column",{attrs:{prop:"supposeBackAmount",label:"应退金额"}}),r("el-table-column",{attrs:{prop:"lastRefundTime",label:"订单结清时间"}}),r("el-table-column",{attrs:{prop:"refundStatusValue",label:"状态"}}),r("el-table-column",{attrs:{prop:"backAmount",label:e.$t("order_refund_amount")}}),r("el-table-column",{attrs:{prop:"operatorName",label:e.$t("common_operator")}}),r("el-table-column",{attrs:{prop:"loanTime",label:e.$t("order_refund_time")}}),r("el-table-column",{attrs:{prop:"remark",label:"退款备注"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.remark)+" ")]}}])}),r("el-table-column",{attrs:{prop:"certificatePath",label:"凭证"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.certificatePath?r("el-link",{attrs:{href:n.certificatePath,target:"_blank",type:"primary"}},[e._v("查看")]):e._e()]}}])}),r("el-table-column",{attrs:{label:e.$t("common_operation"),width:150,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("el-button",{directives:[{name:"has",rawName:"v-has",value:e.$auth.REFUND_DETAIL,expression:"$auth.REFUND_DETAIL"}],attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleDetail(n)}}},[e._v(" "+e._s(e.$t("common_detail"))+" ")])]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.currentPage,limit:e.pageSize},on:{"update:page":function(t){e.currentPage=t},"update:limit":function(t){e.pageSize=t},pagination:e.pagination}}),r("refundDialog",{ref:"refundDialog",on:{getList:e.getTableData}})],1)},a=[],o=(r("caad"),r("ac1f"),r("2532"),r("1276"),r("5530")),u=r("2409"),i=r("ed08"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,"close-on-click-modal":!1,width:"700px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-suffix":"：","label-width":"150px",rules:e.rules}},[r("el-form-item",{attrs:{prop:"orderNo",label:"订单号",rules:e.validateOrderNo()}},[r("el-row",[r("el-col",{attrs:{span:20}},[r("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.orderNo,callback:function(t){e.$set(e.ruleForm,"orderNo",t)},expression:"ruleForm.orderNo"}})],1),r("el-col",{attrs:{span:4}},[r("icon-button",{attrs:{type:"search"},on:{click:e.handleSearch}},[e._v(" "+e._s(e.$t("common_search"))+" ")])],1)],1)],1),r("el-form-item",{attrs:{prop:"backAmount",label:"退款额",rules:e.validateBackAmount()}},[r("el-input",{style:{width:"300px"},attrs:{disabled:!e.maxAmount,clearable:""},model:{value:e.ruleForm.backAmount,callback:function(t){e.$set(e.ruleForm,"backAmount",t)},expression:"ruleForm.backAmount"}})],1),r("el-form-item",{attrs:{prop:"remark",label:"备注"}},[r("el-input",{attrs:{clearable:"",type:"textarea",autosize:{minRows:3,maxRows:7}},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),r("el-form-item",{attrs:{prop:"certificatePath",label:"上传凭证"}},[r("ps-image-upload",{model:{value:e.ruleForm.certificatePath,callback:function(t){e.$set(e.ruleForm,"certificatePath",t)},expression:"ruleForm.certificatePath"}})],1)],1),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("common_cancel")))]),r("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogBtnLoading,expression:"dialogBtnLoading"}],attrs:{type:"primary"},on:{click:e.handleSure}},[e._v(e._s(e.$t("common_confirm")))])],1)],1)},l=[],c=(r("d3b7"),r("2ef0")),d={name:"",props:{},data:function(){return{dialogVisible:!1,initRuleForm:{orderNo:"",backAmount:"",remark:"",certificatePath:""},maxAmount:"",ruleForm:{orderNo:"",backAmount:"",remark:"",certificatePath:""},dialogType:" ",dialogBtnLoading:!1,rules:{}}},methods:{validateOrderNo:function(){return[{required:!0,message:"必填",trigger:"blur"}]},validateBackAmount:function(){var e=this,t=function(t,r,n){e.maxAmount?r>e.maxAmount?n(new Error("退款金额不能大于".concat(e.maxAmount))):n():n(new Error("请先输入订单号"))};return[{validator:t,trigger:"blur"},{required:!0,message:"必填",trigger:"blur"}]},handleSure:function(){var e=this;this.$refs.ruleForm.validate((function(t){t&&(console.log(e.ruleForm),e.dialogBtnLoading=!0,Object(u["e"])({param:e.ruleForm}).then((function(t){e.$message({message:e.$t("common_success"),type:"success"}),e.$emit("getList"),e.dialogVisible=!1})).finally((function(){e.dialogBtnLoading=!1})))}))},handleSearch:function(){var e=this;Object(u["E"])({param:{orderNo:this.ruleForm.orderNo}}).then((function(t){e.maxAmount=t.data.backAmount,e.ruleForm.backAmount=t.data.backAmount}))},show:function(){this.dialogVisible=!0,this.ruleForm=Object(c["cloneDeep"])(this.initRuleForm),this.maxAmount=""}}},m=d,f=r("2877"),b=Object(f["a"])(m,s,l,!1,null,"3c55f565",null),p=b.exports,h=r("27d3"),_=(r("3ca3"),r("ddb0"),r("2b3d"),r("96cf"),r("1da1"),r("5c96"),r("2b0e")),v=r("a47e");Object(v["a"])(_["default"]);function g(e,t){var r=new Blob([e],{type:e.type}),n="".concat(t),a=document.createElement("a");a.download=n,a.style.display="none",a.href=URL.createObjectURL(r),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}var y={name:"refund",components:{refundDialog:p},mixins:[h["a"]],data:function(){return Object(o["a"])(Object(o["a"])({},Object(i["c"])()),{},{tableData:[],total:0,refundTime:[],orderFinishTime:[],query:{orderNo:"",username:"",userPhone:""}})},created:function(){this.getTableData()},methods:{search:function(){this.currentPage=1,this.getTableData()},pagination:function(e){var t=e.page,r=e.limit;this.pageSize=r,this.currentPage=t,this.getTableData()},getTableData:function(){var e,t,r,n,a=this;Object(u["G"])({pageNum:this.currentPage,pageSize:this.pageSize,param:Object(o["a"])(Object(o["a"])({},this.query),{},{loanTimeStart:null===(e=this.refundTime)||void 0===e?void 0:e[0],loanTimeEnd:null===(t=this.refundTime)||void 0===t?void 0:t[1],lastRefundTimeStart:null===(r=this.orderFinishTime)||void 0===r?void 0:r[0],lastRefundTimeEnd:null===(n=this.orderFinishTime)||void 0===n?void 0:n[1]})}).then((function(e){var t;a.tableData=e.data.list,a.total=null!==(t=e.data.total)&&void 0!==t?t:0}))},handleRefund:function(){this.$refs.refundDialog.show()},handleExport:function(){var e,t,r,n;this.refundTime&&!(this.refundTime.length<=0)||this.orderFinishTime&&!(this.orderFinishTime.length<=0)?Object(u["u"])({param:Object(o["a"])(Object(o["a"])({},this.query),{},{loanTimeStart:null===(e=this.refundTime)||void 0===e?void 0:e[0],loanTimeEnd:null===(t=this.refundTime)||void 0===t?void 0:t[1],lastRefundTimeStart:null===(r=this.orderFinishTime)||void 0===r?void 0:r[0],lastRefundTimeEnd:null===(n=this.orderFinishTime)||void 0===n?void 0:n[1]})}).then((function(e){var t=e.headers["content-disposition"].split("filename=")[1];g(e.data,t)})):this.$message.error("请选择退款时间或订单结清时间")},handleDetail:function(e){var t=this.$store.getters.btnPer.includes("refundManagedDetailUserContact")?1:0;this.$router.push({name:"detail",query:{type:14,contactFlag:t,orderNo:e.orderNo,userId:e.userId,orderId:e.orderId}})}}},O=y,k=Object(f["a"])(O,n,a,!1,null,null,null);t["default"]=k.exports},"62e4":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},c0b7:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return s}));r("4160"),r("d81d"),r("a9e3"),r("b64b"),r("159b");var n=r("a6f4"),a=r("5c96"),o=function(e,t,r,n,o){return function(u){var i={};i=!u||u instanceof Event?t:u,e.value.validate((function(e){e&&(n.dialogFormVisible=!1,n.btnLoading=!0,r(i).then((function(e){if(200===e.status){if(a["Message"].success(e.message),"function"===typeof o)o(e);else if(o)throw new Error("callback is not a function")}else a["Message"].error(e.message);n.btnLoading=!1})))}))}},u=function(e,t,r,a,o){return function(u){r.dialogStatus=a,r.dialogFormVisible=!0,Object(n["e"])((function(){if(e.value.resetFields(),console.log("rowData",u),u&&Object.keys(t).forEach((function(e){e in u&&(t[e]=u[e])})),"function"===typeof o)o();else if(o)throw new Error("callback is not a function")}))}},i=function(e){return Object.keys(e).map((function(t){return{value:t,label:e[t]}}))},s=function(e){return Object.keys(e).map((function(t){return{value:Number(t),label:e[t]}}))}}}]);